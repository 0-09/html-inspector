/*!
 * HTML Inspector - v0.1.0
 *
 * Copyright (c) 2013 Philip Walton <http://philipwalton.com>
 * Released under the MIT license
 *
 * Date: 2013-05-25
 */
!function(a,b,c){function d(a){return[].slice.call(a)}function e(a){var b=[];return a=a.sort(),a.forEach(function(c,d){c!==a[d-1]&&b.push(c)}),b}var f=function(){function a(a){a="all"==a?Object.keys(h):a,a.forEach(function(a){h[a]&&h[a].init.call(f)})}function e(){i={},j=[]}function g(a){f.trigger("beforeInspect",f),b(a).find("*").each(function(){var a=this;f.trigger("element",f,[a]),a.id&&f.trigger("id",f,[id,name]),d(a.classList).forEach(function(b){f.trigger("class",f,[b,a])})}),f.trigger("afterInspect",f)}var h={},i={},j=[];return{config:{rules:"all",domRoot:c,complete:function(a){a.forEach(function(a){console.warn(a.message,a.context)})}},on:function(a,c){i[a]||(i[a]=b.Callbacks()),i[a].add(c)},off:function(a,b){i[a]&&i[a].remove(b)},trigger:function(a,b,c){i[a]&&i[a].fireWith(b,c)},addRule:function(a){h[a.id]=a},report:function(a,b,c){j.push({rule:a,message:b,context:c})},inspect:function(c){b.isPlainObject(c)||(c={domRoot:c}),c=b.extend({},f.config,c),a(c.rules),g(c.domRoot),c.complete(j),e()}}}(),g=function(){function a(b){return b.reduce(function(b,c){var e;return c.cssRules?b.concat(a(d(c.cssRules))):c.selectorText?(e=c.selectorText.match(h)||[],b.concat(e.map(function(a){return a.slice(1)}))):b},[])}function f(b){return b.reduce(function(b,c){return b.concat(a(d(c.cssRules)))},[])}function g(){return d(c.styleSheets).filter(function(a){return b(a.ownerNode).is(i.filter)})}var h=/\.[a-z0-9_\-]+/gi,i={getClassSelectors:function(){return e(f(g()))},getSelectors:function(){return[]},filter:'link[rel="stylesheet"], style'};return{styleSheets:i}}();window.HTMLInspector=b.extend(f,g)}(this,jQuery,document),HTMLInspector.addRule({id:"nonsemantic-elements",init:function(){this.on("element",function(a){var b="DIV"==a.nodeName||"SPAN"==a.nodeName,c=0===a.attributes.length;b&&c&&this.report("nonsemantic-elements","Do not use <div> or <span> elements without any attributes",a)})}}),HTMLInspector.addRule({id:"unused-classes",init:function(){var a=/^js\-|^supports\-|^language\-|^lang\-/,b=this.styleSheets.getClassSelectors();this.on("class",function(c,d){a.test(c)||-1!=b.indexOf(c)||this.report("unused-classes","The class '"+c+"' is used in the HTML but not found in any stylesheet",d)})}});